buildscript {
    ext.kotlin_version = '1.5.20'
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath "org.hibernate.build.gradle:gradle-maven-publish-auth:2.0.1"
    }
}

apply plugin: 'kotlin'
apply plugin: 'maven-publish'
apply plugin: 'maven-publish-auth'

group 'cookiedragon.eventsystem'
archivesBaseName = 'EventSystem'
version = ['git', 'describe', '--tags', '--abbrev=0'].execute().text.trim()

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib"
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.1'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.1'
}

test {
    useJUnitPlatform()
}

compileKotlin {
    kotlinOptions.freeCompilerArgs += '-Xpolymorphic-signature'
}

publishing {
    repositories {
        maven {
            name = "konas"
            url = "https://maven.konasclient.com/releases"
        }
    }
    publications {
        gpr(MavenPublication) {
            from(components["java"])
        }
    }
}